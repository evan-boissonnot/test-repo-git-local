(window.webpackJsonp=window.webpackJsonp||[]).push([["curationStation-desktopChannelStories-homepageBeta"],{"+uY9":function(e,t,n){"use strict";var a=n("q1tI"),i=n.n(a),r=n("vOnD"),o=n("bhEy"),s=r.default.div.withConfig({displayName:"header__Container",componentId:"sc-6db0i9-0"})(["align-items:center;border-bottom:1px solid ",";color:",";display:flex;font-size:16px;height:50px;line-height:50px;width:100%;"],o.z.giphyLightCharcoal,o.z.giphyWhite),c=Object(r.default)(o.v).withConfig({displayName:"header__Title",componentId:"sc-6db0i9-1"})(["font-size:16px;margin-right:auto;"]),l=Object(r.default)(o.b).withConfig({displayName:"header__CloseButton",componentId:"sc-6db0i9-2"})(["background:transparent;color:",";flex-grow:0;flex-shrink:0;line-height:40px;margin-left:10px;margin-right:-10px;padding:0;"],o.z.giphyWhite);t.a=function(e){var t=e.children,n=e.title,a=e.onClose;return i.a.createElement(s,null,i.a.createElement(c,null,n),t,i.a.createElement(l,{onClick:a},i.a.createElement("i",{className:"ss-delete"})))}},"/eNz":function(e,t,n){"use strict";var a=n("q1tI"),i=n.n(a),r=n("17x9"),o=n.n(r),s=n("KngK"),c=n("A8+/"),l=n.n(c),u=function(e){var t=e.isAbsolute,n=e.className,a=e.color,r=t?l.a.containerAbsolute:l.a.container;return i.a.createElement("div",{className:n?"".concat(r," ").concat(n):r},i.a.createElement("div",{className:l.a.dot,style:{backgroundColor:a||s.giphyRed}}),i.a.createElement("div",{className:l.a.dot,style:{backgroundColor:a||s.giphyPurple}}),i.a.createElement("div",{className:l.a.dot,style:{backgroundColor:a||s.giphyBlue}}),i.a.createElement("div",{className:l.a.dot,style:{backgroundColor:a||s.giphyGreen}}))};u.propTypes={isAbsolute:o.a.bool,className:o.a.string,color:o.a.string},t.a=u},"3ecx":function(e,t,n){"use strict";var a=n("1OyB"),i=n("vuIU"),r=n("md7G"),o=n("foSv"),s=n("Ji7U"),c=n("q1tI"),l=n.n(c),u=n("bhEy"),d=n("17x9"),p=n.n(d),h=n("vOnD"),m=n("paP4"),g=n("+uY9"),f=n("rMkW"),b=n("o0o1"),y=n.n(b),v=n("HaE+"),w=n("/MKj"),S=n("cLpb"),x=n("jeph"),O=n("vpQ4"),k=n("Puqe"),C=n.n(k),j=n("NAv5"),E=n("uKiO"),_=n("CHef"),I=n("debp"),N=n("kUil");var M,D,A,z=n("PMRk"),T=n("/eNz"),U=Object(h.keyframes)(["0%{opacity:0;}100%{opacity:1;}"]),q=h.default.div.withConfig({displayName:"story__Container",componentId:"pq4bey-0"})(["box-sizing:content-box;min-height:280px;padding:10px 0;position:relative;"]),H=h.default.div.withConfig({displayName:"story__Wrapper",componentId:"pq4bey-1"})(["animation:"," 0.3s ease-out;display:flex;opacity:",";pointer-events:",";width:100%;"],U,function(e){return e.saving?.15:1},function(e){return e.saving?"none":"auto"}),F=h.default.div.withConfig({displayName:"story__StoryWrapper",componentId:"pq4bey-2"})(["pointer-events:none;"]),P=h.default.div.withConfig({displayName:"story__DateWrapper",componentId:"pq4bey-3"})(["flex-grow:0;flex-shrink:0;margin-left:30px;width:300px;input{padding:0px;margin:0px;}"]),W=function(e){function t(){var e,n;Object(a.a)(this,t);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return(n=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).now=new Date,n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.story,n=e.isSaving,a=e.onDateChange;return l.a.createElement(q,null,t?l.a.createElement(c.Fragment,null,l.a.createElement(H,{saving:n},l.a.createElement(F,null,l.a.createElement(u.q,{story:t,width:190,height:260})),l.a.createElement(P,null,l.a.createElement(u.d,{color:t.color,altColor:t.secondary_color,hasTimeSelect:!0,allowMultiple:!1,minDate:new Date(t.publish_datetime),onUpdate:a}))),n&&l.a.createElement(T.a,{isAbsolute:!0})):l.a.createElement(T.a,{isAbsolute:!0}))}}]),t}(c.PureComponent);W.propTypes={story:z.a,isSaving:p.a.bool,onDateChange:p.a.func.isRequired},W.defaultProps={story:null,isSaving:!1};var R=Object(h.default)(u.b).withConfig({displayName:"form__SubmitButton",componentId:"tc399n-0"})(["background:",";display:block;font-size:16px;margin-bottom:6px;width:100%;"],u.z.primaryCTA),B=Object(h.default)(R).withConfig({displayName:"form__CancelButton",componentId:"tc399n-1"})(["background:",";color:",";font-size:14px;margin-bottom:0px;"],u.z.giphyDarkestGrey,u.z.giphyLightGrey),Q=Object(w.b)(function(e,t){var n=t.slug;return{story:Object(S.Y)(e,n)}},{fetchStoryBySlug:x.g,trendStoryById:function(e,t){return n=Object(v.a)(y.a.mark(function n(a,i){var r,o,s,c,l,u,d,p,h,m;return y.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=i(),o=r.user,s=void 0===o?{}:o,n.prev=1,n.next=4,Object(E.bb)(e,t,s.userToken);case 4:if(!(c=n.sent)||!c.data){n.next=16;break}return l=c.data,u=new Date,d=new Date(t),p=Object(O.a)({},l.story,C()(l,"story"),{is_new:!0,group_name:d>u?x.l:x.m}),h=Object(x.j)(p),m=Object(j.distanceInWordsToNow)(d,{addSuffix:!0}).replace(/about /gi,""),a(Object(I.receivedGifs)(Object(x.k)(p))),a(Object(_.a)([h])),a(Object(N.c)("This story is set to trend ".concat(m,"!"),"success")),n.abrupt("return",Promise.resolve());case 16:n.next=22;break;case 18:return n.prev=18,n.t0=n.catch(1),a(Object(N.c)("An error occurred while trending this story","error")),n.abrupt("return",Promise.reject());case 22:case"end":return n.stop()}},n,this,[[1,18]])})),function(e,t){return n.apply(this,arguments)};var n}})((A=D=function(e){function t(){var e,n;Object(a.a)(this,t);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return(n=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={date:null,isSaving:!1},n.onDateChange=function(e){n.setState({date:e})},n.onSubmit=Object(v.a)(y.a.mark(function e(){var t,a,i,r,o,s;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,a=t.story,i=t.trendStoryById,r=t.onSuccess,o=n.state.date,!a||!o){e.next=14;break}return s=a.story_id,n.setState({isSaving:!0}),e.prev=5,e.next=8,i(s,new Date(o).toISOString());case 8:r(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),n.setState({isSaving:!1});case 14:case"end":return e.stop()}},e,this,[[5,11]])})),n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.slug,n=e.story,a=e.fetchStoryBySlug;n||a(t)}},{key:"render",value:function(){var e=this.props,t=e.story,n=e.onCancel,a=this.state,i=a.date,r=a.isSaving;return l.a.createElement(c.Fragment,null,l.a.createElement(W,{story:t,isSaving:r,onDateChange:this.onDateChange}),l.a.createElement(R,{disabled:r||!i||!t,onClick:this.onSubmit},"Add to Scheduled Trending Stories"),l.a.createElement(B,{disabled:r,onClick:n},"Cancel"))}}]),t}(c.PureComponent),D.propTypes={slug:p.a.string.isRequired,story:z.a,fetchStoryBySlug:p.a.func.isRequired,trendStoryById:p.a.func.isRequired,onCancel:p.a.func.isRequired,onSuccess:p.a.func.isRequired},M=A))||M;n.d(t,"a",function(){return G});var K=h.default.div.withConfig({displayName:"add-modal__Container",componentId:"sc-2rzmfs-0"})(["background:",";box-sizing:border-box;padding:0 30px 15px;position:relative;text-align:left;width:600px;"],u.z.giphyDarkestGrey),G=function(e){function t(){var e,n;Object(a.a)(this,t);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return(n=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={slug:""},n.onAddClick=function(e){var t=e.slug;n.setState({slug:t})},n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.onSuccess,a=e.onClose,i=e.onCancel,r=this.state.slug;return l.a.createElement(m.a,null,l.a.createElement(K,null,l.a.createElement(g.a,{title:"Add Trending Story",onClose:a}),l.a.createElement(f.a,{value:t,onSubmit:this.onAddClick}),!!r&&l.a.createElement(Q,{slug:r,onSuccess:n||a,onCancel:i||a})))}}]),t}(c.PureComponent);G.propTypes={url:p.a.string,onCancel:p.a.func,onSuccess:p.a.func,onClose:p.a.func.isRequired}},"A8+/":function(e,t,n){var a=n("We4/");"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(a,i);a.locals&&(e.exports=a.locals)},NMyz:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return s});var a=600,i=230,r=300,o=function(e,t){var n=e.itemWidth,a=e.spacing,i=e.columns,r=e.appWidth;if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return{marginRight:t%i==i-1?0:a,width:n};if(i<2)return{appWidth:r};if(i<3){var o=0===t;return{marginRight:o||t%2!=1?0:a,width:o?r:n}}var s=2*n+a,c=t%24,l=!1,u=!1;return i<4?(l=[0,3,7,13,17,23].indexOf(c)>-1,u=[1,3,6,8,11,13,16,18,21,23].indexOf(c)<0):(l=[0,5,11,17].indexOf(c)>-1,u=[2,5,9,12,16,19,23].indexOf(c)<0),{marginRight:u?a:0,width:l?s:n}},s=function(e){var t=e.columns,n=void 0===t?0:t,o=e.isFixedHeight,s=void 0!==o&&o,c=e.width,l=n||(c>=800?4:c>=a?3:2),u=l<3?6:12,d=(c-u*(l-1))/l;return{spacing:u,itemWidth:d,itemHeight:s?c<=a?i:r:d/.8,columns:l,appWidth:c}}},PMRk:function(e,t,n){"use strict";var a=n("17x9"),i=n.n(a),r=n("xCX0");t.a=i.a.shape({story_id:i.a.string,user_id:i.a.oneOfType([i.a.string,i.a.number]),title:i.a.string,description:i.a.string,gifs:i.a.array,tags:i.a.arrayOf(i.a.string),cover_gif:r.a,is_private:i.a.bool,color:i.a.string,slug:i.a.string,create_datetime:i.a.string})},"We4/":function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"._1daK7YkB8FKzV1RUkbiSNp{display:block;height:15px;margin:0 auto;text-align:center;width:100px;-webkit-animation:_2qcSA0H9OIgGHztSuhaQ1U .8s ease-in-out 0s infinite alternate backwards;animation:_2qcSA0H9OIgGHztSuhaQ1U .8s ease-in-out 0s infinite alternate backwards}._23iEJzmZIiFt9A-HTILsdI{left:50%;margin-left:-50px;margin-top:-8px;position:absolute;top:50%}.-NQD4SC9OMQbFOuSKPxxi{border-radius:50%;display:inline-block;height:15px;margin:0 3px;width:15px;-webkit-animation:_2qcSA0H9OIgGHztSuhaQ1U .6s ease-in-out 0s infinite alternate backwards;animation:_2qcSA0H9OIgGHztSuhaQ1U .6s ease-in-out 0s infinite alternate backwards}.-NQD4SC9OMQbFOuSKPxxi:nth-child(2n){-webkit-animation-delay:.2s;animation-delay:.2s}.-NQD4SC9OMQbFOuSKPxxi:nth-child(3n){-webkit-animation-delay:.4s;animation-delay:.4s}.-NQD4SC9OMQbFOuSKPxxi:nth-child(4n){-webkit-animation-delay:.6s;animation-delay:.6s}@-webkit-keyframes _2qcSA0H9OIgGHztSuhaQ1U{0%{-webkit-transform:translateZ(0) scale(.8);transform:translateZ(0) scale(.8)}to{-webkit-transform:translateZ(0) scale(1.1);transform:translateZ(0) scale(1.1)}}@keyframes _2qcSA0H9OIgGHztSuhaQ1U{0%{-webkit-transform:translateZ(0) scale(.8);transform:translateZ(0) scale(.8)}to{-webkit-transform:translateZ(0) scale(1.1);transform:translateZ(0) scale(1.1)}}",""]),t.locals={container:"_1daK7YkB8FKzV1RUkbiSNp",pulse:"_2qcSA0H9OIgGHztSuhaQ1U",containerAbsolute:"_23iEJzmZIiFt9A-HTILsdI _1daK7YkB8FKzV1RUkbiSNp",dot:"-NQD4SC9OMQbFOuSKPxxi"}},rMkW:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n("vpQ4"),i=n("1OyB"),r=n("vuIU"),o=n("md7G"),s=n("foSv"),c=n("Ji7U"),l=n("q1tI"),u=n.n(l),d=n("17x9"),p=n.n(d),h=n("vOnD"),m=n("bhEy"),g=n("mnxI"),f=h.default.form.withConfig({displayName:"add-input__InputWrapper",componentId:"sc-12x0y11-0"})(["align-items:center;display:flex;width:100%;"]),b=Object(h.default)(m.b).withConfig({displayName:"add-input__AddButton",componentId:"sc-12x0y11-1"})(["background:",";flex-grow:0;flex-shrink:0;height:40px;font-size:14px;line-height:42px;padding:0;width:40px;"],m.z.primaryCTA),y=function(e){var t=Object(g.c)(e);return t&&e.indexOf("/stories/")>-1?t:null},v=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={slug:"",url:""},n.onInput=function(e){var t=e.target.value,a=y(t);n.setState({slug:a,url:t})},n.onSubmit=function(e){var t=n.props.onSubmit;e.preventDefault(),t&&t(Object(a.a)({},n.state))};var r=e.value,c=e.onSubmit;if(r){var l=y(r);n.state={slug:l,url:r},l&&c&&c(n.state)}return n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.value,t=this.state.slug;return u.a.createElement(f,{onSubmit:this.onSubmit},u.a.createElement(m.j,{initialValue:e,inputProps:{placeholder:"Add Story URL",onInput:this.onInput}}),u.a.createElement(b,{disabled:!t,type:"submit"},u.a.createElement("i",{className:"ss-plus"})))}}]),t}(l.PureComponent);v.propTypes={value:p.a.string,onSubmit:p.a.func}},saK6:function(e,t,n){"use strict";var a=n("KQm4"),i=n("1OyB"),r=n("vuIU"),o=n("md7G"),s=n("foSv"),c=n("Ji7U"),l=n("DzJC"),u=n.n(l),d=n("7tbW"),p=n.n(d),h=n("q1tI"),m=n.n(h),g=n("SMhq"),f=n("9C/b"),b=n("bbZa"),y=n("3ecx"),v=n("17x9"),w=n.n(v),S=n("vOnD"),x=n("NMyz"),O=S.default.div.withConfig({displayName:"masonry-grid__Container",componentId:"rdib2y-0"})(["margin-bottom:30px;&:after{clear:both;content:'';display:block;width:100%;}"]),k=S.default.div.withConfig({displayName:"masonry-grid__Item",componentId:"rdib2y-1"})(["float:left;margin-bottom:","px;"],function(e){return e.spacing}),C=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={columns:0,spacing:6,itemWidth:0,appWidth:0},n.state=Object(x.e)(e),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.noFeatured,i=this.state,r=i.itemHeight,o=i.spacing,s=h.Children.toArray(n);return m.a.createElement(O,null,s.map(function(t,n){var i=Object(x.d)(e.state,n,a);return m.a.createElement(k,{key:n,style:i,spacing:o},m.a.cloneElement(t,{width:i.width,height:r}))}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.columns,a=e.width,i=e.children,r=e.isFixedHeight,o=t.columns,s=t.appWidth;if(n!==o||a!==s){var c=h.Children.toArray(i).length;return Object(x.e)({columns:1===c?1:n,width:a,isFixedHeight:r})}return null}}]),t}(h.PureComponent);C.propTypes={width:w.a.number.isRequired,columns:w.a.number,noFeatured:w.a.bool,isFixedHeight:w.a.bool},C.defaultProps={columns:0,noFeatured:!1,isFixedHeight:!1};var j,E,_,I=n("/MKj"),N=n("bhEy"),M=n("cLpb"),D=n("lYx5"),A=S.default.div.withConfig({displayName:"story-item__Container",componentId:"sc-1qfm2v2-0"})(["position:relative;"]),z=S.default.a.withConfig({displayName:"story-item__StoryLink",componentId:"sc-1qfm2v2-1"})(["display:block;height:100%;"]),T=Object(I.b)(function(e){return{loggedInUser:Object(M.db)(e)}})(function(e){var t=e.autoPlay,n=void 0===t||t,a=e.hasWatched,i=void 0!==a&&a,r=e.story,o=void 0===r?{}:r,s=e.width,c=void 0===s?0:s,l=e.height,u=void 0===l?0:l,d=e.showUsername,p=void 0!==d&&d,h=e.showEditMenu,g=void 0!==h&&h,f=e.openMenuDown,b=void 0!==f&&f,y=e.loggedInUser,v=void 0===y?{}:y,w=e.onClick,S=void 0===w?null:w,x=e.onTrendingClick,O=void 0===x?null:x,k=v.username,C=v.isStaff,j=g&&(C||k===o.user.username);return m.a.createElement(A,{style:{width:c,height:u}},j&&m.a.createElement(D.a,{story:o,isOpenDown:b,onTrendingClick:O}),m.a.createElement(z,{href:"/stories/".concat(o.slug),onClick:S?function(e){return S(e,o)}:null},m.a.createElement(N.q,{autoPlay:n,hasWatched:i,showUsername:p,story:o,width:c,height:u})))}),U=Object(g.b)(j=Object(f.a)((_=E=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={trendingStoryUrl:"",isTrendingModal:!1},n.onClick=function(e,t){var i=t.slug,r=t.story_id,o=n.props,s=o.history,c=o.location,l=o.returnRoute,u=n.props,d=u.saveLocal,h=u.local.watchedStories,m=void 0===h?[]:h;e.preventDefault(),d({watchedStories:p()([].concat(Object(a.a)(m),[r]))}),Object(b.b)({category:"Story",action:"Next Story",label:i}),s.push("/stories/".concat(i),{returnRoute:l||c})},n.scroll=u()(function(){if(n.el){var e=n.props.onLoadMore;n.el.getBoundingClientRect().bottom<=1.5*window.innerHeight&&e&&e()}},250),n.openTrendingModal=function(e){var t=e.url;n.setState({trendingStoryUrl:t,isTrendingModal:!0})},n.closeTrendingModal=function(){n.setState({trendingStoryUrl:"",isTrendingModal:!1})},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoadMore&&this.bindScrolling()}},{key:"componentWillUnmount",value:function(){this.unbindScrolling()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.stories,a=t.onLoadMore;e.stories!==n&&a&&setTimeout(this.scroll,0),e.onLoadMore!==a&&(a?this.bindScrolling():this.unbindScrolling())}},{key:"bindScrolling",value:function(){this.unbindScrolling(),window.addEventListener("scroll",this.scroll,!1)}},{key:"unbindScrolling",value:function(){window.removeEventListener("scroll",this.scroll,!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.stories,a=t.columns,i=t.width,r=t.noFeatured,o=t.autoPlay,s=t.isFixedHeight,c=t.showEditMenu,l=t.showTrendStory,u=t.showUsername,d=t.openMenuDown,p=t.onStoryClick,h=this.state,g=h.trendingStoryUrl,f=h.isTrendingModal;return m.a.createElement("div",{ref:function(t){return e.el=t},style:{textAlign:"left"}},m.a.createElement(C,{columns:a,width:i,noFeatured:r,isFixedHeight:s},n.map(function(t){return m.a.createElement(T,{key:"".concat(t.trending_id||"0","-").concat(t.story_id),hasWatched:!1,autoPlay:o,story:t,showEditMenu:c,showUsername:u,openMenuDown:d,onTrendingClick:c&&l?function(){return e.openTrendingModal(t)}:null,onClick:p||e.onClick})})),f&&m.a.createElement(y.a,{url:g,onClose:this.closeTrendingModal}))}}]),t}(h.PureComponent),E.defaultProps={stories:[],columns:0,noFeatured:!1,isFixedHeight:!1,width:0,showEditMenu:!1,showTrendStory:!1,showUsername:!1,openMenuDown:!1,onStoryClick:null},j=_))||j)||j;t.a=U}}]);
//# sourceMappingURL=curationStation-desktopChannelStories-homepageBeta.65773150.bundle.js.map